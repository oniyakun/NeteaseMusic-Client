(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33a1a70e"],{"04fe":function(t,e,a){"use strict";var n=a("56ec"),s=a.n(n);s.a},"2fdb":function(t,e,a){"use strict";var n=a("5ca1"),s=a("d2c8"),r="includes";n(n.P+n.F*a("5147")(r),"String",{includes:function(t){return!!~s(this,t,r).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},5147:function(t,e,a){var n=a("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[n]=!1,!"/./"[t](e)}catch(s){}}return!0}},"56ec":function(t,e,a){},"5f7f":function(t,e,a){},6762:function(t,e,a){"use strict";var n=a("5ca1"),s=a("c366")(!0);n(n.P,"Array",{includes:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},"7ae1":function(t,e,a){"use strict";var n=a("5f7f"),s=a.n(n);s.a},c17f:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.playlist.id?a("div",{staticClass:"playlist-detail"},[a("DetailHeader",{ref:"header",attrs:{playlist:t.playlist,songs:t.songs}}),a("div",{staticClass:"tabs-wrap"},[a("Tabs",{attrs:{tabs:t.tabs,type:"theme"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}}),a("el-input",{directives:[{name:"show",rawName:"v-show",value:t.activeTab===t.SONG_IDX,expression:"activeTab === SONG_IDX"}],staticClass:"input",class:t.getInputCls(),attrs:{placeholder:"搜索歌单音乐","prefix-icon":"el-icon-search"},on:{blur:t.onInputBlur,focus:t.onInputFocus},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1),t.searchValue&&!t.filteredSongs.length?a("div",{staticClass:"empty"},[t._v("\n    未能找到和\n    "),a("span",{staticClass:"keyword"},[t._v("“"+t._s(t.searchValue)+"”")]),t._v("\n    相关的任何音乐\n  ")]):t._e(),a("SongTable",{directives:[{name:"show",rawName:"v-show",value:t.activeTab===t.SONG_IDX,expression:"activeTab === SONG_IDX"}],staticClass:"table",attrs:{highlightText:t.searchValue,songs:t.filteredSongs}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.activeTab===t.COMMENT_IDX,expression:"activeTab === COMMENT_IDX"}],staticClass:"comments"},[a("Comments",{attrs:{id:t.id,type:"playlist"},on:{update:t.onCommentsUpdate}})],1)],1):t._e()},s=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("6762"),a("2fdb"),a("c5f6"),a("bd86")),i=(a("96cf"),a("3b8d")),c=(a("7f7f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.playlist.id?a("div",{staticClass:"header"},[a("div",{staticClass:"img-wrap"},[a("img",{attrs:{src:t.$utils.genImgUrl(t.playlist.coverImgUrl,400)}})]),a("div",{staticClass:"content"},[a("div",{staticClass:"title-wrap"},[a("p",{staticClass:"title"},[t._v(t._s(t.playlist.name))])]),a("div",{staticClass:"creator-wrap"},[a("img",{staticClass:"avatar",attrs:{src:t.playlist.creator.avatarUrl}}),a("p",{staticClass:"creator"},[t._v(t._s(t.playlist.creator.nickname))]),a("p",{staticClass:"create-time"},[t._v("\n        "+t._s(t.$utils.formatDate(t.playlist.createTime,"yyyy-MM-dd"))+" 创建\n      ")])]),a("div",{staticClass:"action-wrap"},[a("NButton",{staticClass:"button",on:{click:t.playAll}},[a("Icon",{staticClass:"icon middle",attrs:{color:"white",type:"play-round"}}),a("span",{staticClass:"middle"},[t._v("播放全部")])],1)],1),a("div",{staticClass:"desc-wrap"},[t.tagsText?a("p",{staticClass:"desc"},[a("span",[t._v("标签："+t._s(t.tagsText))])]):t._e(),t.playlist.description?a("p",{staticClass:"desc"},[a("span",{staticClass:"value"},[t._v("简介："+t._s(t.playlist.description))])]):t._e()])])]):t._e()}),o=[],l=a("e7e6");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(a,!0).forEach(function(e){Object(r["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var f={props:{playlist:{type:Object,default:function(){return{}}},songs:{type:Array,default:function(){return[]}}},methods:p({playAll:function(){this.startSong(this.songs[0]),this.setPlaylist(this.songs)}},Object(l["c"])(["setPlaylist"]),{},Object(l["a"])(["startSong"])),computed:{tagsText:function(){return this.playlist.tags.join("/")}}},d=f,h=(a("7ae1"),a("2877")),v=Object(h["a"])(d,c,o,!1,null,"0c0898f7",null),m=v.exports,b=a("a110"),g=a("961b"),y=a("ed08"),O=a("365c");function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function C(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(a,!0).forEach(function(e){Object(r["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var j=500,_=0,S=1,T={metaInfo:function(){return void 0==this.currentSong.name?{title:this.playlist.name}:{title:this.currentSong.name+" - "+this.currentSong.artistsText}},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.SONG_IDX=_,this.COMMENT_IDX=S;case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),data:function(){return{tabs:["歌曲列表","评论"],activeTab:_,playlist:{},songs:[],searchValue:"",inputFocus:!1}},methods:{init:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(O["f"])({id:this.id});case 2:e=t.sent,a=e.playlist,this.playlist=a,this.genSonglist(a);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),genSonglist:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var a,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.trackIds.map(function(t){var e=t.id;return e}),t.next=3,Object(O["w"])(a.slice(0,j));case 3:n=t.sent,s=n.songs.map(function(t){var e=t.id,a=t.name,n=t.al,s=t.ar,r=t.mv,i=t.dt;return Object(y["createSong"])({id:e,name:a,artists:s,duration:i,mvId:r,albumName:n.name,img:n.picUrl})}),this.songs=s;case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),onCommentsUpdate:function(t){var e=t.total;this.tabs.splice(S,1,"评论(".concat(e,")"))},onInputFocus:function(){this.inputFocus=!0},onInputBlur:function(){this.inputFocus=!1},getInputCls:function(){return this.inputFocus?"":"inactive"},scrollToHeader:function(){var t=this.$refs.header;t&&Object(y["scrollInto"])(t.$el)}},computed:C({id:function(){return Number(this.$route.params.id)},filteredSongs:function(){var t=this;return this.songs.filter(function(e){var a=e.name,n=e.artistsText,s=e.albumName;return"".concat(a).concat(n).concat(s).toLowerCase().includes(t.searchValue.toLowerCase())})}},Object(l["d"])(["currentSong"])),watch:{id:{handler:function(){this.searchValue="",this.init(),this.scrollToHeader()},immediate:!0}},components:{DetailHeader:m,SongTable:b["a"],Comments:g["a"]}},x=T,I=(a("04fe"),Object(h["a"])(x,n,s,!1,null,"5b478e71",null));e["default"]=I.exports},d2c8:function(t,e,a){var n=a("aae3"),s=a("be13");t.exports=function(t,e,a){if(n(e))throw TypeError("String#"+a+" doesn't accept regex!");return String(s(t))}}}]);
//# sourceMappingURL=chunk-33a1a70e.4d7d540b.js.map